(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{19:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(1),o=t.n(a),c=t(14),r=t.n(c),u=(t(19),t(3)),s=t(0),i=function(e){var n=e.person,t=e.poisto;return Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{children:[" ",n.name," ",n.number]}),Object(s.jsx)("button",{onClick:t,children:"poista"})]})},l=function(e){var n=e.filter,t=e.handleFilterChange;return Object(s.jsxs)("div",{children:["filter with: ",Object(s.jsx)("input",{value:n,onChange:t})]})},j=function(e){var n=e.addNum,t=e.handleNameChange,a=e.handleNumChange,o=e.newName,c=e.newNum;return Object(s.jsxs)("form",{onSubmit:n,children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:o,onChange:t})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{value:c,onChange:a})]}),Object(s.jsx)("button",{type:"submit",children:"save"})]})},m=t(4),d=t.n(m),f="/api/persons",b=function(){return d.a.get(f).then((function(e){return e.data}))},h=function(e){return d.a.post(f,e).then((function(e){return e.data}))},O=function(e,n){var t=d.a.delete("".concat(f,"/").concat(e),n);return console.log(t),t.then((function(e){return e.data}))},v=function(e,n){var t=d.a.put("".concat(f,"/").concat(e),n);return console.log(t),t.then((function(e){return e.data}))},g=function(e){var n=e.message,t=e.name;return null===n?null:"error"===t?Object(s.jsx)("div",{className:"error",children:n}):Object(s.jsxs)("div",{className:"message",children:[n," ",t]})},x=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),r=Object(u.a)(c,2),m=r[0],d=r[1],f=Object(a.useState)(""),x=Object(u.a)(f,2),p=x[0],w=x[1],N=Object(a.useState)(""),C=Object(u.a)(N,2),k=C[0],y=C[1],S=Object(a.useState)(null),T=Object(u.a)(S,2),L=T[0],P=T[1],E=Object(a.useState)(null),F=Object(u.a)(E,2),I=F[0],J=F[1];Object(a.useEffect)((function(){b().then((function(e){o(e)}))}),[]);var M=0===k.length?t:t.filter((function(e){return-1!==e.name.toLowerCase().indexOf(k.toLowerCase())}));return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"Phonebook"}),Object(s.jsx)(g,{message:L}),Object(s.jsx)(g,{message:I}),Object(s.jsx)(l,{filter:k,handleFilterChange:function(e){console.log(e.target.value),y(e.target.value)}}),Object(s.jsx)("h2",{children:"add a new"}),Object(s.jsx)(j,{addNum:function(e){e.preventDefault();var n,a={name:m,number:p};if(0===p.length||0===m.length)window.alert("t\xe4yt\xe4 molemmat kent\xe4t");else{if(t.some((function(e){return e.name===m&&e.number===p})))return window.alert("Numero l\xf6ytyy jo"),d(""),void w("");if(t.some((function(e){return e.name===m&&e.number!==p}))){var c=(n=m,t.find((function(e){return e.name===n})).id),r=function(e){return t.findIndex((function(n){return n.id===e}))}(c);window.confirm("".concat(m," l\xf6ytyy jo puhelinluettelosta, korvataanko vanha numero numerolla ").concat(p))&&v(c,a).then((function(e){console.log("palautettu",e),t.splice(r,1,e),o(t),d(""),w(""),P(Object(s.jsx)(g,{message:"Muokattu",name:m})),setTimeout((function(){P(null)}),3e3)})).catch((function(e){console.log("onko undefined",e.response),void 0===e.response?(J(Object(s.jsx)(g,{message:"".concat(m," on valitettavasti poistettu jo palvelimelta"),name:"error"})),setTimeout((function(){J(null)}),3e3),o(t.filter((function(e){return e.id!==c}))),d(""),w("")):J(Object(s.jsx)(g,{message:e.response.data.error,name:"error"})),setTimeout((function(){J(null)}),3e3)}))}else h(a).then((function(e){o(t.concat(e)),d(""),w(""),P(Object(s.jsx)(g,{message:"Lis\xe4tty ",name:m})),setTimeout((function(){P(null)}),3e3)})).catch((function(e){console.log(e.response),J(Object(s.jsx)(g,{message:e.response.data.error,name:"error"})),setTimeout((function(){J(null)}),3e3)}))}},handleNameChange:function(e){console.log(e.target.value),d(e.target.value)},handleNumChange:function(e){console.log(e.target.value),w(e.target.value)},newName:m,newNum:p}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)("ul",{children:M.map((function(e){return Object(s.jsx)("div",{children:Object(s.jsx)(i,{person:e,poisto:function(){return function(e){var n=e,a=e.id,c=t.filter((function(e){return e.id!==a}));window.confirm("Poistetaanko ".concat(e.name," luettelosta"))&&(O(a,n).then(o(c)),P(Object(s.jsx)(g,{message:"Poistettu ",name:e.name})),setTimeout((function(){P(null)}),3e3))}(e)}})},e.name)}))})]})};r.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)(x,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.66d3f4d8.chunk.js.map