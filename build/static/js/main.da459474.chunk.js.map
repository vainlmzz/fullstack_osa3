{"version":3,"sources":["components/Person.js","components/Filter.js","components/Form.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Person","person","poisto","name","number","onClick","Filter","filter","handleFilterChange","value","onChange","Form","addNum","handleNameChange","handleNumChange","newName","newNum","onSubmit","type","baseUrl","axios","get","then","response","data","nameObject","post","id","request","delete","console","log","put","Notification","message","className","App","useState","persons","setPersons","setNewName","setNewNum","setFilter","successMessage","setSuccessMessage","errorMessage","setErrorMessage","useEffect","Persons","personS","personsToShow","length","toLowerCase","indexOf","event","target","preventDefault","window","alert","some","find","alku","findIndex","haeIndeksi","confirm","muokattuP","splice","setTimeout","catch","error","luotuP","concat","map","newPersons","delNum","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.da459474.chunk.js","sourcesContent":["import React from 'react'\n\nconst Person = ( {person, poisto} ) => {\n\n  \n\n    return (\n      <div>\n        \n        <div> {person.name} {person.number}</div>\n        <button onClick={poisto}>poista</button>\n        </div>\n    )\n}\n      \n\n\n\nexport default Person","import React from 'react'\n\n\nconst Filter = ( {filter, handleFilterChange} ) => {\n    return (\n        <div>filter with: <input value={filter} \n        onChange={handleFilterChange}\n        /></div>\n    )\n  }\n\nexport default Filter","import React from 'react'\n\n\nconst Form = ( {addNum, handleNameChange, handleNumChange, newName, newNum} ) => {\n    return (\n        <form onSubmit={addNum}>\n        <div>name: <input value={newName} \n        onChange={handleNameChange}\n        /></div>\n        <div>number: <input value={newNum} \n        onChange={handleNumChange}\n        /></div>\n        <button type=\"submit\">save</button>\n      </form> \n    )\n  }\n\nexport default Form","import axios from 'axios'\n\n\n\nconst baseUrl = '/api/persons'\n\nconst haeKaikki = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\n\nconst luoP = nameObject => {\n    const request = axios.post(baseUrl, nameObject)\n    return request.then(response => response.data)\n}\n  \n\nconst poistaP = (id, nameObject) => {\n    const request = axios.delete(`${baseUrl}/${id}`, nameObject)\n    console.log(request)\n    return request.then(response => response.data)\n    \n}\n\nconst muokkaaP = (id, nameObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, nameObject)\n    console.log(request)\n    return request.then(response => response.data)\n    \n}\n\n\nexport default { haeKaikki,luoP,poistaP, muokkaaP }","\nimport React from 'react'\n\n\nconst Notification = ({ message, name }) => {\n    if (message === null) {\n      return null\n    }\n\n    \n    if (message === \"on poistettu jo palvelimelta\") {\n      return (\n        <div className=\"error\">\n          {name} {message} \n        </div>\n      )\n    }\n    \n    else return (\n      <div className=\"message\">\n        {message} {name}\n      </div>\n    )\n  }\n\n  export default Notification","import React, { useState, useEffect } from 'react'\nimport Person from './components/Person'\nimport Filter from './components/Filter'\nimport Form from './components/Form'\nimport Persons from './services/persons'\nimport Notification from './components/Notification'\n\n\n\n\n\n\nconst App = () => {\n  const [ persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNum, setNewNum ] = useState('')\n  const [ filter, setFilter] = useState('')\n  const [ successMessage, setSuccessMessage] = useState(null)\n  const [ errorMessage, setErrorMessage] = useState(null)\n\n\n  \n  const koukku = () => {\n    Persons\n      .haeKaikki()\n      .then(personS => {\n        setPersons(personS)\n      })\n  }\n  useEffect(koukku, [])\n\n  \n  const addNum = (event) => {\n    event.preventDefault()\n    const nameObject = {\n      name: newName,\n      number: newNum\n    }\n\n    if (newNum.length===0 || newName.length === 0)   {\n      window.alert(`täytä molemmat kentät`)\n    }\n    else if (persons.some(person => person.name === newName && person.number === newNum))   {\n      window.alert(`Numero löytyy jo`)\n      setNewName('')\n      setNewNum('')\n      return\n    }\n    else if (persons.some(person => person.name === newName && person.number !== newNum))  {\n      const id = haeId(newName)\n      const alku = haeIndeksi(id)\n      \n      \n      if (window.confirm(`${newName} löytyy jo puhelinluettelosta, korvataanko vanha numero numerolla ${newNum}`)) {\n        Persons\n          .muokkaaP(id, nameObject)\n          .then(muokattuP => {\n              \n              persons.splice(alku,1, muokattuP)\n              setPersons(persons)\n              setNewName('')\n              setNewNum('')\n              setSuccessMessage( <Notification message={'Muokattu'} name={newName}/>)\n              setTimeout(() => {\n              setSuccessMessage(null)\n            }, 3000)\n              \n          })\n          .catch(error => {\n            setErrorMessage( <Notification message={\"on valitettavasti poistettu jo palvelimelta\"} name={newName}/>)\n            setTimeout(() => {\n              setErrorMessage(null)\n            }, 3000)\n            setPersons(persons.filter(person => person.id !== id))\n            setNewName('')\n            setNewNum('')\n          })\n          \n      }\n    }\n    else {\n\n      Persons\n        .luoP(nameObject)\n        .then(luotuP => {\n            setPersons(persons.concat(luotuP))\n            setNewName('')\n            setNewNum('')\n            setSuccessMessage( <Notification message={'Lisätty '} name={newName}/>)\n            setTimeout(() => {\n            setSuccessMessage(null)\n          }, 3000)\n            \n          })\n    }  \n   \n  }\n\n\n  function haeId(name) {\n    return (\n        persons.find(person => person.name === name).id\n        \n    )\n  }\n\n  function haeIndeksi(id) {\n    return (\n        persons.findIndex(person => person.id === id)\n        \n    )\n  }\n\n  const delNum = person => {\n    \n    const nameObject = person\n    const id = person.id\n    const newPersons = persons.filter(person => person.id !== id)\n    if ( window.confirm(`Poistetaanko ${person.name} luettelosta`)) {\n      Persons\n      .poistaP(id, nameObject )\n      .then(setPersons(newPersons)) \n        setSuccessMessage( <Notification message={'Poistettu '} name={person.name}/>)\n        setTimeout(() => {\n        setSuccessMessage(null)\n          }, 3000)\n    }  \n  }\n\n\n\n  const handleFilterChange = (event) => {\n    console.log(event.target.value)\n    setFilter(event.target.value)\n  }\n\n  \n  const handleNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNumChange = (event) => {\n    console.log(event.target.value)\n    setNewNum(event.target.value)\n  }\n  \n\n\n  const personsToShow = filter.length===0\n    ? persons\n    : persons.filter(function(person) {\n      return person.name.toLowerCase().indexOf(filter.toLowerCase()) !== -1\n  })  \n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={successMessage} />\n      <Notification message={errorMessage} />\n      \n      <Filter filter={filter} handleFilterChange={handleFilterChange}/>\n      \n      <h2>add a new</h2>\n      <Form addNum={addNum} handleNameChange={handleNameChange} handleNumChange={handleNumChange} newName={newName} newNum={newNum}/>\n      \n      <h2>Numbers</h2>\n      <ul>\n      {personsToShow.map(person => <div key={person.name}><Person person={person} poisto={() => delNum(person)}/></div>)}\n      \n      </ul>\n     \n    </div>\n  )\n\n}\n\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}