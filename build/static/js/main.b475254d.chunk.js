(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{19:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(1),c=t.n(a),r=t(14),o=t.n(r),u=(t(19),t(3)),s=t(0),i=function(e){var n=e.person,t=e.poisto;return Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{children:[" ",n.name," ",n.number]}),Object(s.jsx)("button",{onClick:t,children:"poista"})]})},l=function(e){var n=e.filter,t=e.handleFilterChange;return Object(s.jsxs)("div",{children:["filter with: ",Object(s.jsx)("input",{value:n,onChange:t})]})},j=function(e){var n=e.addNum,t=e.handleNameChange,a=e.handleNumChange,c=e.newName,r=e.newNum;return Object(s.jsxs)("form",{onSubmit:n,children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{value:c,onChange:t})]}),Object(s.jsxs)("div",{children:["number: ",Object(s.jsx)("input",{value:r,onChange:a})]}),Object(s.jsx)("button",{type:"submit",children:"save"})]})},m=t(4),d=t.n(m),b="/api/persons",f=function(){return d.a.get(b).then((function(e){return e.data}))},h=function(e){return d.a.post(b,e).then((function(e){return e.data}))},O=function(e,n){var t=d.a.delete("".concat(b,"/").concat(e),n);return console.log(t),t.then((function(e){return e.data}))},g=function(e,n){var t=d.a.put("".concat(b,"/").concat(e),n);return console.log(t),t.then((function(e){return e.data}))},v=function(e){var n=e.message,t=e.name;return null===n?null:"error"===t?Object(s.jsx)("div",{className:"error",children:n}):Object(s.jsxs)("div",{className:"message",children:[n," ",t]})},x=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],r=Object(a.useState)(""),o=Object(u.a)(r,2),m=o[0],d=o[1],b=Object(a.useState)(""),x=Object(u.a)(b,2),p=x[0],w=x[1],N=Object(a.useState)(""),C=Object(u.a)(N,2),y=C[0],k=C[1],S=Object(a.useState)(null),T=Object(u.a)(S,2),L=T[0],P=T[1],E=Object(a.useState)(null),F=Object(u.a)(E,2),I=F[0],J=F[1];Object(a.useEffect)((function(){f().then((function(e){c(e)}))}),[]);var M=0===y.length?t:t.filter((function(e){return-1!==e.name.toLowerCase().indexOf(y.toLowerCase())}));return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"Phonebook"}),Object(s.jsx)(v,{message:L}),Object(s.jsx)(v,{message:I}),Object(s.jsx)(l,{filter:y,handleFilterChange:function(e){console.log(e.target.value),k(e.target.value)}}),Object(s.jsx)("h2",{children:"add a new"}),Object(s.jsx)(j,{addNum:function(e){e.preventDefault();var n,a={name:m,number:p};if(0===p.length||0===m.length)window.alert("t\xe4yt\xe4 molemmat kent\xe4t");else{if(t.some((function(e){return e.name===m&&e.number===p})))return window.alert("Numero l\xf6ytyy jo"),d(""),void w("");if(t.some((function(e){return e.name===m&&e.number!==p}))){var r=(n=m,t.find((function(e){return e.name===n})).id),o=function(e){return t.findIndex((function(n){return n.id===e}))}(r);window.confirm("".concat(m," l\xf6ytyy jo puhelinluettelosta, korvataanko vanha numero numerolla ").concat(p))&&g(r,a).then((function(e){console.log("palautettu",e),t.splice(o,1,e),c(t),d(""),w(""),P(Object(s.jsx)(v,{message:"Muokattu",name:m})),setTimeout((function(){P(null)}),3e3)})).catch((function(e){J(Object(s.jsx)(v,{message:e.response.data.error,name:"error"})),setTimeout((function(){J(null)}),3e3),c(t),d(""),w("")}))}else h(a).then((function(e){c(t.concat(e)),d(""),w(""),P(Object(s.jsx)(v,{message:"Lis\xe4tty ",name:m})),setTimeout((function(){P(null)}),3e3)})).catch((function(e){console.log(e.response),J(Object(s.jsx)(v,{message:e.response.data.error,name:"error"})),setTimeout((function(){J(null)}),3e3)}))}},handleNameChange:function(e){console.log(e.target.value),d(e.target.value)},handleNumChange:function(e){console.log(e.target.value),w(e.target.value)},newName:m,newNum:p}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)("ul",{children:M.map((function(e){return Object(s.jsx)("div",{children:Object(s.jsx)(i,{person:e,poisto:function(){return function(e){var n=e,a=e.id,r=t.filter((function(e){return e.id!==a}));window.confirm("Poistetaanko ".concat(e.name," luettelosta"))&&(O(a,n).then(c(r)),P(Object(s.jsx)(v,{message:"Poistettu ",name:e.name})),setTimeout((function(){P(null)}),3e3))}(e)}})},e.name)}))})]})};o.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(x,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.b475254d.chunk.js.map