(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{19:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),u=n(14),o=n.n(u),r=(n(19),n(3)),i=n(0),s=function(e){var t=e.person,n=e.poisto;return Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{children:[" ",t.name," ",t.number]}),Object(i.jsx)("button",{onClick:n,children:"poista"})]})},l=function(e){var t=e.filter,n=e.handleFilterChange;return Object(i.jsxs)("div",{children:["filter with: ",Object(i.jsx)("input",{value:t,onChange:n})]})},j=function(e){var t=e.addNum,n=e.handleNameChange,a=e.handleNumChange,c=e.newName,u=e.newNum;return Object(i.jsxs)("form",{onSubmit:t,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:c,onChange:n})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:u,onChange:a})]}),Object(i.jsx)("button",{type:"submit",children:"save"})]})},m=n(4),d=n.n(m),f="/api/persons",b=function(){return d.a.get(f).then((function(e){return e.data}))},h=function(e){return d.a.post(f,e).then((function(e){return e.data}))},O=function(e,t){var n=d.a.delete("".concat(f,"/").concat(e),t);return console.log(n),n.then((function(e){return e.data}))},v=function(e,t){var n=d.a.put("".concat(f,"/").concat(e),t);return console.log(n),n.then((function(e){return e.data}))},g=function(e){var t=e.message,n=e.name;return null===t?null:"on poistettu jo palvelimelta"===t?Object(i.jsxs)("div",{className:"error",children:[n," ",t]}):Object(i.jsxs)("div",{className:"message",children:[t," ",n]})},x=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)(""),o=Object(r.a)(u,2),m=o[0],d=o[1],f=Object(a.useState)(""),x=Object(r.a)(f,2),p=x[0],w=x[1],N=Object(a.useState)(""),C=Object(r.a)(N,2),y=C[0],k=C[1],S=Object(a.useState)(null),T=Object(r.a)(S,2),L=T[0],P=T[1],E=Object(a.useState)(null),F=Object(r.a)(E,2),I=F[0],J=F[1];Object(a.useEffect)((function(){b().then((function(e){c(e)}))}),[]);var M=0===y.length?n:n.filter((function(e){return-1!==e.name.toLowerCase().indexOf(y.toLowerCase())}));return Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"Phonebook"}),Object(i.jsx)(g,{message:L}),Object(i.jsx)(g,{message:I}),Object(i.jsx)(l,{filter:y,handleFilterChange:function(e){console.log(e.target.value),k(e.target.value)}}),Object(i.jsx)("h2",{children:"add a new"}),Object(i.jsx)(j,{addNum:function(e){e.preventDefault();var t,a={name:m,number:p};if(0===p.length||0===m.length)window.alert("t\xe4yt\xe4 molemmat kent\xe4t");else{if(n.some((function(e){return e.name===m&&e.number===p})))return window.alert("Numero l\xf6ytyy jo"),d(""),void w("");if(n.some((function(e){return e.name===m&&e.number!==p}))){var u=(t=m,n.find((function(e){return e.name===t})).id),o=function(e){return n.findIndex((function(t){return t.id===e}))}(u);window.confirm("".concat(m," l\xf6ytyy jo puhelinluettelosta, korvataanko vanha numero numerolla ").concat(p))&&v(u,a).then((function(e){n.splice(o,1,e),c(n),d(""),w(""),P(Object(i.jsx)(g,{message:"Muokattu",name:m})),setTimeout((function(){P(null)}),3e3)})).catch((function(e){J(Object(i.jsx)(g,{message:"on valitettavasti poistettu jo palvelimelta",name:m})),setTimeout((function(){J(null)}),3e3),c(n.filter((function(e){return e.id!==u}))),d(""),w("")}))}else h(a).then((function(e){c(n.concat(e)),d(""),w(""),P(Object(i.jsx)(g,{message:"Lis\xe4tty ",name:m})),setTimeout((function(){P(null)}),3e3)}))}},handleNameChange:function(e){console.log(e.target.value),d(e.target.value)},handleNumChange:function(e){console.log(e.target.value),w(e.target.value)},newName:m,newNum:p}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)("ul",{children:M.map((function(e){return Object(i.jsx)("div",{children:Object(i.jsx)(s,{person:e,poisto:function(){return function(e){var t=e,a=e.id,u=n.filter((function(e){return e.id!==a}));window.confirm("Poistetaanko ".concat(e.name," luettelosta"))&&(O(a,t).then(c(u)),P(Object(i.jsx)(g,{message:"Poistettu ",name:e.name})),setTimeout((function(){P(null)}),3e3))}(e)}})},e.name)}))})]})};o.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(x,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.da459474.chunk.js.map